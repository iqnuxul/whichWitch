# ğŸ”— å‰ç«¯ã€åç«¯ã€åˆçº¦è¿æ¥æ£€æŸ¥æŠ¥å‘Š

## âœ… é…ç½®çŠ¶æ€æ€»è§ˆ

### 1. å‰ç«¯é…ç½® (Next.js + React)
**ä½ç½®**: `src/ui/`

#### Web3 è¿æ¥ âœ…
- **é…ç½®æ–‡ä»¶**: `src/ui/lib/web3/config.ts`
- **ä½¿ç”¨æ¡†æ¶**: Wagmi + Viem
- **ç½‘ç»œ**: Sepolia æµ‹è¯•ç½‘
- **RPC URL**: é€šè¿‡ç¯å¢ƒå˜é‡ `NEXT_PUBLIC_RPC_URL` é…ç½®
- **é’±åŒ…è¿æ¥**: MetaMask (injected connector)

```typescript
// é…ç½®æ­£ç¡®ï¼Œä½¿ç”¨ç¯å¢ƒå˜é‡
http(process.env.NEXT_PUBLIC_RPC_URL || 'https://rpc.sepolia.org')
```

#### åˆçº¦åœ°å€é…ç½® âœ…
- **é…ç½®æ–‡ä»¶**: `src/ui/lib/web3/contracts/addresses.ts`
- **CreationManager**: `0xB9365df57B3250cC6e4B9b3efDeE9871020b68cF`
- **PaymentManager**: `0xE9e700df0e448F5DebE55A8B153aebf8988db0c8`
- **AuthorizationManager**: `0x182AF7db7B2928455900595506D94b26E173aeA1`

æ‰€æœ‰åœ°å€éƒ½é€šè¿‡ç¯å¢ƒå˜é‡é…ç½® âœ…

#### åˆçº¦ ABI âœ…
- **é…ç½®æ–‡ä»¶**: `src/ui/lib/web3/contracts/abis.ts`
- åŒ…å«æ‰€æœ‰å¿…è¦çš„å‡½æ•°å’Œäº‹ä»¶å®šä¹‰
- ä½¿ç”¨ TypeScript const assertions ç¡®ä¿ç±»å‹å®‰å…¨

---

### 2. åç«¯é…ç½® (Supabase)
**ä½ç½®**: `src/backend/`

#### Supabase å®¢æˆ·ç«¯ âœ…
- **é…ç½®æ–‡ä»¶**: `src/ui/lib/supabase/client.ts`
- **é¡¹ç›® URL**: é€šè¿‡ `NEXT_PUBLIC_SUPABASE_URL` é…ç½®
- **Anon Key**: é€šè¿‡ `NEXT_PUBLIC_SUPABASE_ANON_KEY` é…ç½®
- **Service Role Key**: é€šè¿‡ `SUPABASE_SERVICE_ROLE_KEY` é…ç½®ï¼ˆæœåŠ¡ç«¯ï¼‰

```typescript
// é…ç½®æ­£ç¡®ï¼Œä½¿ç”¨ç¯å¢ƒå˜é‡
const supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL!;
const supabaseAnonKey = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!;
```

#### æ•°æ®åº“è¡¨ç»“æ„ âœ…
å·²å®šä¹‰çš„ TypeScript ç±»å‹ï¼š
- `User` - ç”¨æˆ·ä¿¡æ¯
- `Work` - ä½œå“ä¿¡æ¯
- `Folder` - æ”¶è—å¤¹
- `Collection` - æ”¶è—å…³ç³»
- `AuthorizationRequest` - æˆæƒè¯·æ±‚
- `WorkStats` - ä½œå“ç»Ÿè®¡

#### æ•°æ®åº“ Schema âœ…
- **ä½ç½®**: `src/backend/supabase/schema.sql`
- åŒ…å«æ‰€æœ‰å¿…è¦çš„è¡¨ç»“æ„å®šä¹‰

---

### 3. æ™ºèƒ½åˆçº¦é…ç½® (Hardhat)
**ä½ç½®**: `src/contracts/`

#### Hardhat é…ç½® âœ…
- **é…ç½®æ–‡ä»¶**: `src/contracts/hardhat.config.cjs`
- **Solidity ç‰ˆæœ¬**: 0.8.20
- **ç½‘ç»œé…ç½®**: Sepolia æµ‹è¯•ç½‘
- **RPC URL**: é€šè¿‡ `SEPOLIA_RPC_URL` ç¯å¢ƒå˜é‡é…ç½®

```javascript
// é…ç½®æ­£ç¡®ï¼Œä½¿ç”¨ç¯å¢ƒå˜é‡
url: process.env.SEPOLIA_RPC_URL || "https://rpc.sepolia.org"
```

#### æ™ºèƒ½åˆçº¦ âœ…
å·²éƒ¨ç½²çš„åˆçº¦ï¼š
1. **CreationManager.sol** - ä½œå“åˆ›å»ºå’Œç®¡ç†
2. **PaymentManager.sol** - æ”¯ä»˜å’Œæ”¶ç›Šåˆ†é…
3. **AuthorizationManager.sol** - æˆæƒç®¡ç†

---

### 4. IPFS å­˜å‚¨é…ç½® (Pinata)

#### Pinata é…ç½® âœ…
- **API Key**: é€šè¿‡ `PINATA_API_KEY` é…ç½®
- **API Secret**: é€šè¿‡ `PINATA_API_SECRET` é…ç½®
- **JWT**: é€šè¿‡ `PINATA_JWT` é…ç½®

---

## ğŸ”§ å·²ä¿®å¤çš„é—®é¢˜

### tsconfig.json é”™è¯¯ âœ…
**é—®é¢˜**: TypeScript åœ¨å¯»æ‰¾æ—§çš„è·¯å¾„é…ç½®
```
Error: No inputs were found in config file
```

**è§£å†³æ–¹æ¡ˆ**: 
- æ›´æ–°äº† `include` è·¯å¾„æŒ‡å‘æ­£ç¡®çš„ `src/ui/` ç›®å½•
- æ’é™¤äº† `src/contracts` å’Œ `src/backend` ç›®å½•
- è®¾ç½® `strict: false` é¿å…ç±»å‹æ£€æŸ¥é˜»å¡å¼€å‘

---

## ğŸ“‹ è¿æ¥æµç¨‹å›¾

```
ç”¨æˆ·æµè§ˆå™¨
    â†“
Next.js å‰ç«¯ (src/ui/)
    â†“
    â”œâ”€â†’ Wagmi/Viem â†’ RPC (Alchemy) â†’ æ™ºèƒ½åˆçº¦ (Sepolia)
    â”‚                                    â†“
    â”‚                              CreationManager
    â”‚                              PaymentManager
    â”‚                              AuthorizationManager
    â”‚
    â”œâ”€â†’ Supabase Client â†’ Supabase æ•°æ®åº“
    â”‚                          â†“
    â”‚                      Users, Works, Collections
    â”‚
    â””â”€â†’ Pinata SDK â†’ IPFS å­˜å‚¨
                        â†“
                    ä½œå“å…ƒæ•°æ®å’Œå›¾ç‰‡
```

---

## âœ… éªŒè¯æ¸…å•

- [x] å‰ç«¯ Web3 é…ç½®æ­£ç¡®
- [x] åˆçº¦åœ°å€é…ç½®æ­£ç¡®
- [x] åˆçº¦ ABI å®šä¹‰å®Œæ•´
- [x] Supabase å®¢æˆ·ç«¯é…ç½®æ­£ç¡®
- [x] æ•°æ®åº“ç±»å‹å®šä¹‰å®Œæ•´
- [x] Hardhat é…ç½®æ­£ç¡®
- [x] Pinata IPFS é…ç½®æ­£ç¡®
- [x] æ‰€æœ‰æ•æ„Ÿä¿¡æ¯ä½¿ç”¨ç¯å¢ƒå˜é‡
- [x] tsconfig.json é”™è¯¯å·²ä¿®å¤

---

## ğŸš€ å¯åŠ¨é¡¹ç›®

### 1. å®‰è£…ä¾èµ–
```bash
npm install
```

### 2. ç¼–è¯‘æ™ºèƒ½åˆçº¦ï¼ˆå¦‚æœéœ€è¦ï¼‰
```bash
npm run compile
```

### 3. å¯åŠ¨å¼€å‘æœåŠ¡å™¨
```bash
npm run dev
```

### 4. è®¿é—®åº”ç”¨
```
http://localhost:3000
```

---

## ğŸ§ª æµ‹è¯•è¿æ¥

### æµ‹è¯• Web3 è¿æ¥
1. æ‰“å¼€æµè§ˆå™¨å¼€å‘è€…å·¥å…·
2. è¿æ¥ MetaMask é’±åŒ…
3. ç¡®ä¿é’±åŒ…åˆ‡æ¢åˆ° Sepolia æµ‹è¯•ç½‘
4. æ£€æŸ¥æ§åˆ¶å°æ˜¯å¦æœ‰è¿æ¥é”™è¯¯

### æµ‹è¯• Supabase è¿æ¥
```typescript
// åœ¨æµè§ˆå™¨æ§åˆ¶å°æµ‹è¯•
import { supabase } from '@/lib/supabase/client';
const { data, error } = await supabase.from('users').select('*').limit(1);
console.log(data, error);
```

### æµ‹è¯•åˆçº¦è°ƒç”¨
```typescript
// ä½¿ç”¨ Wagmi hooks æµ‹è¯•
import { useReadContract } from 'wagmi';
import { CONTRACT_ADDRESSES } from '@/lib/web3/contracts/addresses';
import { CreationManagerABI } from '@/lib/web3/contracts/abis';

// è¯»å–åˆçº¦æ•°æ®
const { data } = useReadContract({
  address: CONTRACT_ADDRESSES.creation,
  abi: CreationManagerABI,
  functionName: 'getWork',
  args: [1n],
});
```

---

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **ç¡®ä¿ MetaMask æœ‰ Sepolia æµ‹è¯•å¸**
   - è·å–æµ‹è¯•å¸: https://sepoliafaucet.com/

2. **Supabase æ•°æ®åº“éœ€è¦å…ˆè¿è¡Œ schema.sql**
   - åœ¨ Supabase Dashboard çš„ SQL Editor ä¸­æ‰§è¡Œ

3. **ç¯å¢ƒå˜é‡å¿…é¡»ä»¥ NEXT_PUBLIC_ å¼€å¤´æ‰èƒ½åœ¨æµè§ˆå™¨ä¸­è®¿é—®**
   - å‰ç«¯å¯è®¿é—®: `NEXT_PUBLIC_*`
   - ä»…æœåŠ¡ç«¯: å…¶ä»–å˜é‡

4. **åˆçº¦åœ°å€å·²éƒ¨ç½²åˆ° Sepolia**
   - å¦‚éœ€é‡æ–°éƒ¨ç½²ï¼Œä½¿ç”¨: `npm run deploy:sepolia`
   - è®°å¾—æ›´æ–° `.env.local` ä¸­çš„åˆçº¦åœ°å€

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [Wagmi æ–‡æ¡£](https://wagmi.sh/)
- [Supabase æ–‡æ¡£](https://supabase.com/docs)
- [Hardhat æ–‡æ¡£](https://hardhat.org/docs)
- [Pinata æ–‡æ¡£](https://docs.pinata.cloud/)
